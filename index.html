<!DOCTYPE html>
<html class="no-js">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/scrolly.css">
  <style>
  .section h3 {
    height: 20px;
    margin: 0;
    padding: 8px 10px 5px;
  }
  .snapHeader {
    width:100%;
    position:fixed;
  }
  </style>
</head>
<body>
  <div id="sidebar">
    <div class="scroll-pane">
      <div class="section one">
        <h3>Section 1</h3>
        <div class="body">
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam porta ipsum a leo malesuada, sed aliquet justo eleifend. Sed vehicula pretium libero, id congue purus lobortis eget. Maecenas iaculis congue vehicula. Aliquam erat volutpat. Sed vitae facilisis nisi, nec scelerisque nulla. Maecenas a lacus euismod, tincidunt mauris at, sagittis tortor. Donec ullamcorper tortor arcu, a malesuada diam posuere id. Phasellus id ullamcorper quam.</p>
        </div>
      </div>
      <div class="section two">
        <h3>Section 2</h3>
        <div class="body">
          <p>Maecenas accumsan nec est semper scelerisque. Fusce et leo sit amet ligula dignissim porta. Donec et neque vitae nisi euismod fermentum. Ut ut libero faucibus, facilisis dui id, condimentum orci. Quisque at nisi eget erat cursus eleifend nec convallis felis. Aenean molestie at odio et tempor.</p>

          <p>Maecenas accumsan nec est semper scelerisque. Fusce et leo sit amet ligula dignissim porta. Donec et neque vitae nisi euismod fermentum. Ut ut libero faucibus, facilisis dui id, condimentum orci. Quisque at nisi eget erat cursus eleifend nec convallis felis. Aenean molestie at odio et tempor.</p>
        </div>
      </div>
      <div class="section three">
        <h3>Section 3</h3>
        <div class="body">
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam porta ipsum a leo malesuada, sed aliquet justo eleifend. Sed vehicula pretium libero, id congue purus lobortis eget. Maecenas iaculis congue vehicula. Aliquam erat volutpat. Sed vitae facilisis nisi, nec scelerisque nulla. Maecenas a lacus euismod, tincidunt mauris at, sagittis tortor. Donec ullamcorper tortor arcu, a malesuada diam posuere id. Phasellus id ullamcorper quam.</p>
        </div>
      </div>
      <div class="section four">
        <h3>Section 4</h3>
        <div class="body">
          <p>Maecenas accumsan nec est semper scelerisque. Fusce et leo sit amet ligula dignissim porta. Donec et neque vitae nisi euismod fermentum. Ut ut libero faucibus, facilisis dui id, condimentum orci. Quisque at nisi eget erat cursus eleifend nec convallis felis. Aenean molestie at odio et tempor.</p>

          <p>Maecenas accumsan nec est semper scelerisque. Fusce et leo sit amet ligula dignissim porta. Donec et neque vitae nisi euismod fermentum. Ut ut libero faucibus, facilisis dui id, condimentum orci. Quisque at nisi eget erat cursus eleifend nec convallis felis. Aenean molestie at odio et tempor.</p>
        </div>
      </div>
      <div class="section five">
        <h3>Section 5</h3>
        <div class="body">
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam porta ipsum a leo malesuada, sed aliquet justo eleifend. Sed vehicula pretium libero, id congue purus lobortis eget. Maecenas iaculis congue vehicula. Aliquam erat volutpat. Sed vitae facilisis nisi, nec scelerisque nulla. Maecenas a lacus euismod, tincidunt mauris at, sagittis tortor. Donec ullamcorper tortor arcu, a malesuada diam posuere id. Phasellus id ullamcorper quam.</p>
        </div>
      </div>
      <div class="section six">
        <h3>Section 6</h3>
        <div class="body">
          <p>Maecenas accumsan nec est semper scelerisque. Fusce et leo sit amet ligula dignissim porta. Donec et neque vitae nisi euismod fermentum. Ut ut libero faucibus, facilisis dui id, condimentum orci. Quisque at nisi eget erat cursus eleifend nec convallis felis. Aenean molestie at odio et tempor.</p>

          <p>Maecenas accumsan nec est semper scelerisque. Fusce et leo sit amet ligula dignissim porta. Donec et neque vitae nisi euismod fermentum. Ut ut libero faucibus, facilisis dui id, condimentum orci. Quisque at nisi eget erat cursus eleifend nec convallis felis. Aenean molestie at odio et tempor.</p>
        </div>
      </div>
    </div>
  </div>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.js"></script>
  <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.0.js"><\/script>')</script>

  <script src="js/scrolly.js"></script>
  <script>
  $(document).ready(function() {
    $('.scroll-pane').scroll(function(){
      var sectionAmount = $('#sidebar .section').length;
      var headerHeight = $('#sidebar .section h3').outerHeight();
      var elementCountBottom = sectionAmount * headerHeight - headerHeight;
      var elementCountTop = 0;
      $('.section').each(function(){
        var parentHeight = $(this).parent().outerHeight() - elementCountBottom;
        var posTop = $(this).position().top;
        var posBottom = $(this).offset().top + headerHeight;
        if (posTop <= elementCountTop) {
          $('h3', this).addClass('snapHeader').css('top', elementCountTop+'px');
          $('h3', this).siblings().css('padding-top', headerHeight+'px');
        } else {
          $('h3', this).removeClass('snapHeader').css('top', 'inherit');
          $('h3', this).siblings().css('padding-top', 'inherit');
        }
        if (posBottom >= parentHeight) {
          $('h3', this).addClass('snapHeader').css('bottom', elementCountBottom+'px');
          $('h3', this).siblings().css('padding-top', headerHeight+'px');
        } else {
          $('h3', this).removeClass('snapHeader').css('bottom', 'inherit');
          $('h3', this).siblings().css('padding-top', 'inherit');
        }
        elementCountTop+=headerHeight;
        elementCountBottom-=headerHeight;
      });
    }).trigger('scroll');
  });
  </script>
</body>
</html>
